<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id=iframe></div>
  <script>
    const getGeneratedPageURL = ({html, css, js}) => {
      const getBlobURL = (code, type) => {
        const blob = new Blob([code], {type})
        return URL.createObjectURL(blob)
      }

      const cssURL = getBlobURL(css, 'text/css')
      const jsURL = getBlobURL(js, 'text/javascript')

      const source = `
    <html>
      <head>
        ${css && `<link rel="stylesheet" type="text/css" href="${cssURL}" />`}
        ${js && `<script src="${jsURL}"></script>`}
  </head>

  <body>
    ${html || ''}
  </body>

</html>
`
console.log(source)
return getBlobURL(source, 'text/html')
}

const url = getGeneratedPageURL({
html: '<p>Hello, world!</p>',
css: 'p { color: blue; }',
js: 'console.log("hi")'
})

const iframe = document.querySelector('#iframe')
iframe.src = url

</script>
</body>

</html>



// const getGeneratedPageURL = ({html, css, js}) => {
// const getBlobURL = (code, type) => {
// const blob = new Blob([code], {type})
// return URL.createObjectURL(blob)
// }

// const cssURL = getBlobURL(css, 'text/css')
// const jsURL = getBlobURL(js, 'text/javascript')

// const source = '<html>

<head>';
  // source += '
  <link rel="stylesheet" type="text/css" href="' + cssURL + ' />';
  //     source += '< ' + jsURL + '>';
  //     source += " <\/scr ipt>";
  // sourch += '
</head>

<body> ' + html + '</body>

</html> html > ';




// return getBlobURL(source, 'text/html')
// }

// const url = getGeneratedPageURL({
// html: '<p>Hello, world!</p>',
// css: 'p { color: blue; }',
// js: 'console.log("hi")'
// })

// document.querySelector('#iframe').src = url